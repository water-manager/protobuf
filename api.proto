syntax = "proto3";

option java_multiple_files = true;
option java_package = "dev.igorxp5.proto.api";

message Request {
    uint32 id = 1;
    oneof message {
        CreateWaterSource createWaterSource = 2;
        CreateWaterTank createWaterTank = 3;
        SetWaterTankMinimumVolume setWaterTankMinimumVolume = 4;
        SetWaterTankMaxVolume setWaterTankMaxVolume = 5;
        SetWaterTankZeroVolume setWaterTankZeroVolume = 6;
        SetMode setMode = 7;
        SetWaterSourceState setWaterSourceState = 8;
        GetWaterSourceList getWaterSourceList = 9;
        GetWaterTankList getWaterTankList = 10;
        GetWaterTankVolume getWaterTankVolume = 11;
        GetWaterTankPressure getWaterTankPressure = 12;
        GetWaterSourceState getWaterSourceState = 13;
        GetError GetError = 14;
        RemoveWaterSource removeWaterSource = 15;
        RemoveWaterTank removeWaterTank = 16;
        Reset reset = 17;
    }
}

message Value {
    oneof value {
        bool boolValue = 2;
        int32 intValue = 3;
        float floatValue = 4;
        string stringValue = 5;
    }
}

message Response {
    uint32 id = 1;
    Value message = 2;
    bool error = 3;
}

message CreateWaterSource {
    string name = 1;
    uint32 pin = 2;
    optional string waterTankName = 3;
}

message CreateWaterTank {
    string name = 1;
    uint32 volumeReaderPin = 2;
    float volumeFactor = 3;
    float pressureFactor = 4;
    optional string waterSourceName = 5;
}

message SetWaterTankMinimumVolume {
    string waterTankName = 1;
    float value = 2;
}

message SetWaterTankMaxVolume {
    string waterTankName = 1;
    float value = 2;
}

message SetWaterTankZeroVolume {
    string waterTankName = 1;
    float value = 2;
}

message SetMode {
    enum Mode {
        AUTOMATIC = 0;
        MANUAL = 1;
    }
    Mode mode = 1;
}

message SetWaterSourceState {
    string waterSourceName = 1;
    bool state = 2;
}

message GetWaterTankList {
    repeated string waterTankName = 1;
}

message GetWaterSourceList {
    repeated string waterSourceName = 1;
}

message GetWaterTankVolume {
    string waterTankName = 1;
}

message GetWaterTankPressure {
    string waterTankName = 1;
}

message GetWaterSourceState {
    string waterSourceName = 1;
}

message RemoveWaterSource {
    string waterSourceName = 1;
}

message RemoveWaterTank {
    string waterTankName = 1;
}

message Reset {
}

message GetError {
    repeated string error = 1;
}
