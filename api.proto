syntax = "proto3";

option java_multiple_files = true;
option java_package = "dev.igorxp5.proto.api";

message Request {
    uint64 id = 1;
    oneof message {
        CreateWaterSource createWaterSource = 2;
        CreateWaterTank createWaterTank = 3;
        SetWaterTankMinimumVolume setWaterTankMinimumVolume = 4;
        SetWaterTankMaxVolume setWaterTankMaxVolume = 5;
        SetWaterTankZeroVolume setWaterTankZeroVolume = 6;
        SetMode setMode = 7;
        SetWaterSourceState setWaterSourceState = 8;
        GetWaterTankVolume getWaterTankVolume = 9;
        GetWaterTankPressure getWaterTankPressure = 10;
        GetWaterSourceState getWaterSourceState = 11;
        GetError GetError = 12;
    }
}

message Value {
    oneof value {
        bool boolValue = 2;
        int32 intValue = 3;
        double doubleValue = 4;
        string stringVlaue = 5;
    }
}

message Response {
    uint64 id = 1;
    Value message = 2;
    bool error = 3;
}

message CreateWaterSource {
    string name = 1;
    uint32 pin = 2;
    optional string waterTankName = 3;
}

message CreateWaterTank {
    string name = 1;
    uint32 volumeReaderPin = 2;
    double volumeFactor = 3;
    optional string waterSourceName = 4;
}

message SetWaterTankMinimumVolume {
    string waterTankName = 1;
    double value = 2;
}

message SetWaterTankMaxVolume {
    string waterTankName = 1;
    double value = 2;
}

message SetWaterTankZeroVolume {
    string waterTankName = 1;
    double value = 2;
}

message SetMode {
    enum Mode {
        AUTOMATIC = 0;
        MANUAL = 1;
    }
    Mode mode = 1;
}

message SetWaterSourceState {
    string waterSourceName = 1;
    bool state = 2;
}

message GetWaterTankList {
    repeated string waterTankName = 1;
}

message GetWaterSourceList {
    repeated string waterSourceName = 1;
}

message GetWaterTankVolume {
    string waterTankName = 1;
}

message GetWaterTankPressure {
    string waterTankName = 1;
}

message GetWaterSourceState {
    string waterSourceName = 1;
}

message RemoveWaterSource {
    string waterSourceName = 1;
}

message RemoveWaterTank {
    string waterTankName = 1;
}

message Reset {
}

message GetError {
    repeated string error = 1;
}
